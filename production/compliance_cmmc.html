<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://fonts.googleapis.com; img-src 'self' data: https: blob:; font-src 'self' data: https://fonts.gstatic.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; connect-src 'self' ws: wss: http://localhost:* https://api.example.com https://*.googleapis.com; frame-src 'self' https://www.youtube.com https://player.vimeo.com; media-src 'self' https: blob:; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
	<link rel="icon" href="images/favicon.svg" type="image/svg+xml">
	<link rel="icon" href="images/favicon-32x32.svg" type="image/svg+xml" sizes="32x32">
	<link rel="icon" href="images/favicon-16x16.svg" type="image/svg+xml" sizes="16x16">
	<link rel="icon" href="images/favicon.ico" type="image/x-icon">
	
	<!-- Apple Touch Icon -->
	<link rel="apple-touch-icon" href="images/apple-touch-icon.svg" sizes="180x180">
	
	<!-- Android/Chrome -->
	<link rel="manifest" href="site.webmanifest">
	
	<!-- Theme colors -->
	<meta name="theme-color" content="rgb(42, 63, 84)">
	<meta name="msapplication-TileColor" content="rgb(42, 63, 84)">

    <title>CMMC L2 Dashboard - RISQIANT</title>

    <!-- Vite Entry Point - will bundle all styles -->
    <script type="module" src="/src/main-minimal-modern.js"></script>
    <!-- Ensure ECharts is loaded -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  </head>

  <body class="nav-md page-index">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="index.html" class="site_title"><img src="images/logo.svg" alt="RISQIANT" class="logo-full" style="height: 40px;"><img src="images/logo-icon.svg" alt="RISQIANT" class="logo-icon" style="height: 30px; display: none;"></a>
            </div>

            <div class="clearfix"></div>

            <!-- menu profile quick info -->
            <div class="profile clearfix">
              <div class="profile_pic">
                <img src="images/img.jpg" alt="..." class="img-circle profile_img">
              </div>
              <div class="profile_info">
                <span>Welcome,</span>
                <h4>Admin User</h4>
              </div>
            </div>
            <!-- /menu profile quick info -->

            <br />

            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <h3>General</h3>
                <ul class="nav side-menu">
                  <li><a href="index.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                  <li><a><i class="fas fa-shield-alt"></i> Risk Assessment <span class="fas fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                        <li><a href="vulnerabilities.html">Attack Surface</a></li>
                        <li><a href="vulnerabilities.html">Vulnerabilities</a></li>
                        <li><a href="risk_assessment.html">Risk Register</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fas fa-check-circle"></i> Compliance <span class="fas fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="compliance_soc2.html">SOC 2</a></li>
                      <li><a href="compliance_pci.html">PCI-DSS</a></li>
                      <li><a href="compliance_cmmc.html">CMMC L2</a></li>
                      <li><a href="compliance_iso27001.html">ISO 27001</a></li>
                    </ul>
                  </li>
                  <li><a href="evidence_vault.html"><i class="fas fa-archive"></i> Evidence Library</a></li>
                  <li><a href="remediation.html"><i class="fas fa-lightbulb"></i> Remediation Center</a></li>
                </ul>
              </div>
            </div>
            <!-- /sidebar menu -->

            <!-- /menu footer buttons -->
            <div class="sidebar-footer hidden-small">
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Settings">
                <span class="fas fa-cog" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="FullScreen">
                <span class="fas fa-expand" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Lock">
                <span class="fas fa-eye-slash" aria-hidden="true"></span>
              </a>
              <a data-bs-toggle="tooltip" data-bs-placement="top" title="Logout" href="login.html">
                <span class="fas fa-power-off" aria-hidden="true"></span>
              </a>
            </div>
            <!-- /menu footer buttons -->
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fas fa-bars"></i></a>
              </div>
              <nav class="nav navbar-nav">
              <ul class="navbar-right">
                <li class="nav-item dropdown open" style="padding-left: 15px;">
                  <a href="javascript:;" class="user-profile dropdown-toggle" aria-haspopup="true" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="images/img.jpg" alt="">Admin User
                  </a>
                  <div class="dropdown-menu dropdown-usermenu float-end" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item"  href="javascript:;"> Profile</a>
                      <a class="dropdown-item"  href="javascript:;">
                        <span class="badge bg-red float-end">50%</span>
                        <span>Settings</span>
                      </a>
                  <a class="dropdown-item"  href="javascript:;">Help</a>
                    <a class="dropdown-item"  href="login.html"><i class="fas fa-sign-out-alt float-end"></i> Log Out</a>
                  </div>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          
          <!-- Hero Section: Stats -->
          <div class="row">
            <div class="col-md-12 col-sm-12">
              <div class="x_panel bg-transparent border-0">
                <div class="x_content">
                  <div class="row">
                    <!-- SPRS Score Gauge -->
                    <div class="col-md-3 col-sm-6 text-center">
                        <div class="x_panel" style="height: 180px; display: flex; flex-direction: column; justify-content: center;">
                            <h5 class="text-muted">Current SPRS Score</h5>
                            <div id="echart_gauge_sprs" style="height: 140px;"></div>
                        </div>
                    </div>
                    
                    <!-- Stats Tiles -->
                    <div class="col-md-9 col-sm-6">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="x_panel tile fixed_height_180">
                                    <div class="x_title">
                                        <h2>Implemented</h2>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content text-center">
                                        <h1 class="display-4 text-success" style="margin-top: 20px;">88</h1>
                                        <p>Practices Met</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="x_panel tile fixed_height_180">
                                    <div class="x_title">
                                        <h2>Action Required</h2>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content text-center">
                                        <h1 class="display-4 text-danger" style="margin-top: 20px;">22</h1>
                                        <p>Practices Not Met</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="x_panel tile fixed_height_180">
                                    <div class="x_title">
                                        <h2>Active POAMs</h2>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content text-center">
                                        <h1 class="display-4 text-warning" style="margin-top: 20px;">12</h1>
                                        <p>Remediation Plans</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Main Visuals -->
          <div class="row">
            <!-- Sunburst: Practice Distribution -->
            <div class="col-md-8 col-sm-12">
              <div class="x_panel">
                <div class="x_title">
                  <h2>CMMC Practice Hierarchy <small>NIST 800-171 Rev 2</small></h2>
                  <div class="clearfix"></div>
                </div>
                <div class="x_content">
                  <div id="echart_sunburst" style="height: 600px;"></div>
                </div>
              </div>
            </div>

            <!-- Radar: Maturity & Trend -->
            <div class="col-md-4 col-sm-12">
                <div class="row">
                    <div class="col-md-12">
                        <div class="x_panel">
                            <div class="x_title">
                            <h2>Domain Maturity</h2>
                            <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                            <div id="echart_radar" style="height: 350px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="x_panel">
                            <div class="x_title">
                            <h2>Score Projection</h2>
                            <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                            <div id="echart_trend" style="height: 180px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
          </div>

          <!-- POAM Table -->
          <div class="row">
            <div class="col-md-12 col-sm-12">
              <div class="x_panel">
                <div class="x_title">
                  <h2>Plan of Action & Milestones (POAM) <small>High Priority Items</small></h2>
                  <div class="clearfix"></div>
                </div>
                <div class="x_content">
                  <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Practice</th>
                        <th>Weakness</th>
                        <th>Remediation Plan</th>
                        <th>Scheduled Completion</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><strong>POAM-001</strong></td>
                        <td>AC.L2-3.1.1</td>
                        <td>MFA not enforced on legacy VPN</td>
                        <td>Migrate users to ZTNA solution</td>
                        <td>2026-03-15</td>
                        <td><span class="badge bg-warning text-dark">In Progress</span></td>
                      </tr>
                      <tr>
                        <td><strong>POAM-002</strong></td>
                        <td>SC.L2-3.13.11</td>
                        <td>FIPS 140-2 validation pending</td>
                        <td>Upgrade cryptographic module firmware</td>
                        <td>2026-02-28</td>
                        <td><span class="badge bg-danger">Delayed</span></td>
                      </tr>
                      <tr>
                        <td><strong>POAM-003</strong></td>
                        <td>AU.L2-3.3.1</td>
                        <td>Audit logs retention < 1 year</td>
                        <td>Expand S3 bucket retention policy</td>
                        <td>2026-01-20</td>
                        <td><span class="badge bg-success">Completed (Verify)</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer>
          <div class="float-end">
            RISQIANT - Continuous Security Platform
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>

    <!-- CMMC Charts Initialization -->
    <script type="module">
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof echarts === 'undefined') {
            console.error("ECharts not loaded");
            return;
        }

        // 1. SPRS Gauge
        const gaugeChart = echarts.init(document.getElementById('echart_gauge_sprs'));
        gaugeChart.setOption({
            series: [{
                type: 'gauge',
                startAngle: 180,
                endAngle: 0,
                min: -203,
                max: 110,
                splitNumber: 4,
                itemStyle: { color: '#26B99A' },
                progress: { show: true, width: 18 },
                pointer: { show: false },
                axisLine: { lineStyle: { width: 18 } },
                axisTick: { show: false },
                splitLine: { length: 15, lineStyle: { width: 2, color: '#999' } },
                axisLabel: { distance: 25, color: '#999', fontSize: 10 },
                anchor: { show: false },
                title: { show: false },
                detail: {
                    valueAnimation: true,
                    fontSize: 40,
                    offsetCenter: [0, '20%'],
                    formatter: '{value}',
                    color: '#2A3F54'
                },
                data: [{ value: 72 }]
            }]
        });

        // 2. Sunburst: CMMC Practices
        // Structure: Level > Domain > Practice Status
        const sunburstData = [
            {
                name: 'AC',
                itemStyle: { color: '#26B99A' },
                children: [
                    { name: 'Met', value: 22, itemStyle: { color: '#48D1B2' } },
                    { name: 'Not Met', value: 4, itemStyle: { color: '#E74C3C' } }
                ]
            },
            {
                name: 'AT',
                itemStyle: { color: '#3498DB' },
                children: [
                    { name: 'Met', value: 3, itemStyle: { color: '#5DADE2' } }
                ]
            },
            {
                name: 'AU',
                itemStyle: { color: '#9B59B6' },
                children: [
                    { name: 'Met', value: 5, itemStyle: { color: '#AF7AC5' } },
                    { name: 'Not Met', value: 4, itemStyle: { color: '#E74C3C' } }
                ]
            },
            {
                name: 'CM',
                itemStyle: { color: '#F39C12' },
                children: [
                    { name: 'Met', value: 6, itemStyle: { color: '#F5B041' } },
                    { name: 'Not Met', value: 3, itemStyle: { color: '#E74C3C' } }
                ]
            },
             {
                name: 'IA',
                itemStyle: { color: '#34495E' },
                children: [
                    { name: 'Met', value: 8, itemStyle: { color: '#5D6D7E' } }
                ]
            },
             {
                name: 'IR',
                itemStyle: { color: '#16A085' },
                children: [
                    { name: 'Met', value: 5, itemStyle: { color: '#48C9B0' } },
                    { name: 'Not Met', value: 2, itemStyle: { color: '#E74C3C' } }
                ]
            },
            {
                name: 'MA',
                itemStyle: { color: '#27AE60' },
                children: [
                     { name: 'Met', value: 6, itemStyle: { color: '#58D68D' } }
                ]
            },
            {
                name: 'MP',
                itemStyle: { color: '#D35400' },
                children: [
                     { name: 'Met', value: 4, itemStyle: { color: '#E59866' } },
                     { name: 'Not Met', value: 2, itemStyle: { color: '#E74C3C' } }
                ]
            }
        ];

        const sunburstChart = echarts.init(document.getElementById('echart_sunburst'));
        sunburstChart.setOption({
            series: {
                type: 'sunburst',
                data: sunburstData,
                radius: [0, '90%'],
                label: {
                    rotate: 'radial'
                },
                itemStyle: {
                    borderRadius: 7,
                    borderWidth: 2
                }
            }
        });

        // 3. Radar: Domain Maturity
        const radarChart = echarts.init(document.getElementById('echart_radar'));
        radarChart.setOption({
            radar: {
                indicator: [
                    { name: 'AC', max: 100 },
                    { name: 'AT', max: 100 },
                    { name: 'AU', max: 100 },
                    { name: 'CM', max: 100 },
                    { name: 'IA', max: 100 },
                    { name: 'IR', max: 100 }
                ],
                center: ['50%', '50%'],
                radius: '65%'
            },
            series: [{
                name: 'Maturity',
                type: 'radar',
                data: [
                    {
                        value: [85, 100, 55, 66, 100, 71],
                        name: 'Current',
                        areaStyle: { color: 'rgba(38, 185, 154, 0.4)' },
                        itemStyle: { color: '#26B99A' },
                        lineStyle: { color: '#26B99A' }
                    }
                ]
            }]
        });

        // 4. Trend Line
        const trendChart = echarts.init(document.getElementById('echart_trend'));
        trendChart.setOption({
            tooltip: { trigger: 'axis' },
            grid: { top: 10, bottom: 20, left: 30, right: 10 },
            xAxis: {
                type: 'category',
                data: ['Q1', 'Q2', 'Q3', 'Q4'],
                axisLine: { show: false },
                axisTick: { show: false }
            },
            yAxis: {
                type: 'value',
                splitLine: { lineStyle: { type: 'dashed' } }
            },
            series: [{
                data: [45, 52, 68, 72],
                type: 'line',
                smooth: true,
                lineStyle: { color: '#26B99A', width: 3 },
                areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: 'rgba(38, 185, 154, 0.5)' },
                        { offset: 1, color: 'rgba(38, 185, 154, 0.0)' }
                    ])
                }
            }]
        });

        // Resize handler
        window.addEventListener('resize', function() {
            gaugeChart.resize();
            sunburstChart.resize();
            radarChart.resize();
            trendChart.resize();
        });
      });
    </script>
  </body>
</html>